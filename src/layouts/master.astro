---
import "css/app.css";
import core from "frankenstyle/js/hwc-core.iife?url";
import components from "frankenstyle/js/hwc-components.iife?url";
import icon from "frankenstyle/js/hwc-icon.iife?url";
import chart from "frankenstyle/js/hwc-chart.iife?url";
import runtime from "frankenstyle/js/frankenstyle.iife?url";

const { doc } = Astro.props;
---

<!doctype html>
<html class="antialiased" lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{doc.title}</title>
    <link
      rel="preload"
      href="/fonts/geist-font/fonts/GeistVariableVF.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/geist-font/fonts/GeistMonoVariableVF.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link rel="stylesheet" href="/fonts/geist-font/style.css" />

    <script is:inline>
      const htmlElement = document.documentElement;

      const __FRANKEN__ = JSON.parse(
        localStorage.getItem("__FRANKEN__") || "{}",
      );

      if (
        __FRANKEN__.mode === "dark" ||
        (!__FRANKEN__.mode &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        htmlElement.classList.add("dark");
        htmlElement.dataset.theme = "github-dark";
      } else {
        htmlElement.classList.remove("dark");
        htmlElement.dataset.theme = "github-light";
      }

      htmlElement.classList.add(__FRANKEN__.theme || "uk-theme-neutral");
      htmlElement.classList.add(__FRANKEN__.radii || "uk-radii-md");
      htmlElement.classList.add(__FRANKEN__.shadows || "uk-shadows-sm");
      htmlElement.classList.add(__FRANKEN__.font || "uk-font-sm");
      htmlElement.classList.add(__FRANKEN__.chart || "uk-chart-default");
    </script>

    {
      doc.meta &&
        Object.keys(doc.meta).map((key) => (
          <meta name={key} content={doc.meta[key]} />
        ))
    }

    <link rel="shortcut icon" href="/images/monster.svg" />
    <link rel="icon" href="/images/monster.svg" />
    <link rel="apple-touch-icon" href="/images/monster.svg" />

    <script is:inline src={core} type="module"></script>
  </head>
  <body
    class="bg color font-family"
    style="--bg: var(--uk-bg); --color: var(--uk-bg-f); --font-family: var(--font-geist-sans)"
  >
    <slot />

    <script is:inline src={icon} type="module"></script>
    <script is:inline src={chart} type="module"></script>
    <script is:inline src={components} type="module"></script>
    <script is:inline src={runtime} type="module"></script>
    <script is:inline src="/js/htmx@2.0.6/htmx.min.js"></script>
    <script is:inline src="/js/alpinejs@3.14.9/alpinejs.min.js"></script>
  </body>
</html>
